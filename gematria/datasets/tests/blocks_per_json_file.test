; Test that splitting a dataset among multiple JSON files works as expected.

; RUN: split-file %s %t
; RUN: mkdir %t.jsondir
; RUN: %convert_bhive_to_llvm_exegesis_input --json_output_dir=%t.jsondir --bhive_csv=%t/test.csv --blocks_per_json_file=1
; RUN: cat %t.jsondir/0.json | FileCheck --check-prefix FILE1 %s
; RUN: cat %t.jsondir/1.json | FileCheck --check-prefix FILE2 %s

; Ensure that we don't have any "leftover" files.
; RUN: ls %t.jsondir | FileCheck --check-prefix DIR %s

; FILE1:     "Hex": "85c044897c2460",
; FILE1-NOT: "Hex"

; FILE2:     "Hex": "3b31",
; FILE2-NOT: "Hex"

; DIR: 0.json
; DIR: 1.json
; DIR-NOT: 2.json

;--- test.csv
85c044897c2460,98.000000
3b31,45.000000
